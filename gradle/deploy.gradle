remotes {
    pi {
        host = '192.168.0.10'
        user = 'fieldju'
        identity = file("${System.getenv("HOME")}${File.separator}.ssh${File.separator}id_rsa")
    }
}

task deploy(dependsOn: build) {
    doLast {
        ssh.run {
            session(remotes.pi) {
                put from: buildDir.getAbsolutePath() + File.separator + 'libs' + File.separator + artifactId + '-' + version + ".jar", into: '/home/fieldju/app.jar'
                execute "sudo mv /home/fieldju/app.jar /opt/pager/app.jar"
                execute "sudo chown pager:pager /opt/pager/app.jar"
                execute 'sudo service pager restart'
            }
        }
    }
}

task startPager() {
    doLast {
        ssh.run {
            session(remotes.pi) {
                def res = execute 'sudo service pager start'
                println res
            }
        }
    }
}

task stopPager() {
    doLast {
        ssh.run {
            session(remotes.pi) {
                execute 'sudo service pager stop'
            }
        }
    }
}

task restartPager() {
    doLast {
        ssh.run {
            session(remotes.pi) {
                execute 'sudo service pager restart'
            }
        }
    }
}